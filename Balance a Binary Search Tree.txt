var balanceBST = function(root) {
    // Step 1: Inorder traversal to get sorted nodes
    const nodes = [];
    
    function inorder(node) {
        if (!node) return;
        inorder(node.left);
        nodes.push(node);
        inorder(node.right);
    }
    
    inorder(root);
    
    // Step 2: Build balanced BST from sorted nodes
    function buildBalancedBST(left, right) {
        if (left > right) return null;
        
        const mid = Math.floor((left + right) / 2);
        const root = nodes[mid];
        
        root.left = buildBalancedBST(left, mid - 1);
        root.right = buildBalancedBST(mid + 1, right);
        
        return root;
    }
    
    return buildBalancedBST(0, nodes.length - 1);
};
